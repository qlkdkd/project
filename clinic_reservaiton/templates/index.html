<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ìŠ¤ë§ˆíŠ¸ ì§„ë£Œì‹¤ ëŒ€ì‹œë³´ë“œ</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="container mt-5">
    <h1 class="text-center mb-4">ðŸ“Š ìŠ¤ë§ˆíŠ¸ ì§„ë£Œì‹¤ ì˜ˆì•½ ëŒ€ì‹œë³´ë“œ</h1>

    <div class="row">
      <!-- ì‹œê°„ëŒ€ë³„ ì˜ˆì•½ ìˆ˜ -->
      <div class="col-md-6 mb-4">
        <div class="card shadow">
          <div class="card-header bg-primary text-white">ì‹œê°„ëŒ€ë³„ ì˜ˆì•½ ìˆ˜</div>
          <div class="card-body">
            <canvas id="timeChart"></canvas>
          </div>
        </div>
      </div>

      <!-- ì§„ë£Œì‹¤ë³„ ì˜ˆì•½ ë¹„ìœ¨ -->
      <div class="col-md-6 mb-4">
        <div class="card shadow">
          <div class="card-header bg-success text-white">ì§„ë£Œì‹¤ë³„ ì˜ˆì•½ ë¹„ìœ¨</div>
          <div class="card-body">
            <canvas id="roomChart"></canvas>
          </div>
        </div>
      </div>
    </div>

    <!-- í•˜ë‹¨ Footer -->
    <footer class="text-center text-muted mt-5">
      &copy; 2025 ìŠ¤ë§ˆíŠ¸ ì§„ë£Œì‹¤ ì‹œìŠ¤í…œ
    </footer>
  </div>

  <script>
    async function loadChartData() {
      const response = await fetch('/api/chart-data');
      const data = await response.json();

      // ì‹œê°„ëŒ€ë³„ ì˜ˆì•½ ìˆ˜
      const ctx1 = document.getElementById('timeChart').getContext('2d');
      new Chart(ctx1, {
        type: 'bar',
        data: {
          labels: data.time_labels,
          datasets: [{
            label: 'ì˜ˆì•½ ìˆ˜',
            data: data.time_values,
            backgroundColor: 'rgba(54, 162, 235, 0.6)'
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false
        }
      });

      // ì§„ë£Œì‹¤ë³„ ì˜ˆì•½ ë¹„ìœ¨
      const ctx2 = document.getElementById('roomChart').getContext('2d');
      new Chart(ctx2, {
        type: 'doughnut',
        data: {
          labels: data.room_labels,
          datasets: [{
            label: 'ì˜ˆì•½ ë¹„ìœ¨',
            data: data.room_values,
            backgroundColor: [
              'rgba(255, 99, 132, 0.6)',
              'rgba(255, 206, 86, 0.6)',
              'rgba(75, 192, 192, 0.6)',
              'rgba(153, 102, 255, 0.6)',
              'rgba(255, 159, 64, 0.6)'
            ]
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false
        }
      });
    }

    loadChartData();
  </script>
</body>
</html>
